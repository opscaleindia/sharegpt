volumes:
  app_vol:

version: "3.1"
services:
  next_app:
    container_name: next_app
    restart: always
    image: opscale-sharegpt:v1
    env_file:
      - .env.production
    # ports:
    #   - "3000:3000"
    volumes:
      - app_vol:/app
    networks:
      - sharegpt_network
  
  next_nginx:
    image: nginx
    volumes:
    - ./nginx.conf:/etc/nginx/conf.d/default.conf
    - ../../ssl-certificates:/etc/letsencrypt/live/sharegpt.opscale.io
    ports:
    - "80:80"
    networks:
      - sharegpt_network


networks:
  sharegpt_network:
    name: sharegpt_network
    external: true
