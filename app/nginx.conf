

server {
	listen       80;
    listen  [::]:80;
	server_name sharegpt.opscale.io, www.sharegpt.opscale.io;
	# ssl on;
	# ssl_certificate  /var/fullchain.pem;
	# ssl_certificate_key  /var/privkey.pem;
	# client_max_body_size 0;

	error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

	location / {
		proxy_pass http://next_app:3000;
	}
}


# proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=STATIC:10m inactive=7d use_temp_path=off;

# server {
# 	listen 80 ssl;

# 	server_name next_app;
# 	# ssl on;
# 	# ssl_certificate  /var/fullchain.pem;
# 	# ssl_certificate_key  /var/privkey.pem;

# 	server_tokens off;

# 	gzip on;
# 	gzip_proxied any;
# 	gzip_comp_level 4;
# 	gzip_types text/css application/javascript image/svg+xml;

# 	proxy_http_version 1.1;
# 	proxy_set_header Upgrade $http_upgrade;
# 	proxy_set_header Connection 'upgrade';
# 	proxy_set_header Host $host;
# 	proxy_cache_bypass $http_upgrade;

# 	location /.next/public {
# 		proxy_cache STATIC;
# 		proxy_pass next_app:3000;

# 		# For testing cache - remove before deploying to production
# 		# add_header X-Cache-Status $upstream_cache_status;
# 	}

# 	location /public {
# 		proxy_cache STATIC;
# 		proxy_ignore_headers Cache-Control;
# 		proxy_cache_valid 60m;
# 		proxy_pass next_app:3000;

# 		# For testing cache - remove before deploying to production
# 		# add_header X-Cache-Status $upstream_cache_status;
# 	}

# 	location / {
# 		proxy_pass next_app:3000;
# 	}
# }